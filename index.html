<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta charset="utf-8" />
<meta name="generator" content="Docutils 0.20.1: https://docutils.sourceforge.io/" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Database Test 2 (DBT-2) Documentation</title>
<style type="text/css">

/* Minimal style sheet for the HTML output of Docutils.                    */
/*                                                                         */
/* :Author: Günter Milde, based on html4css1.css by David Goodger          */
/* :Id: $Id: minimal.css 9079 2022-06-19 14:00:56Z milde $                                                               */
/* :Copyright: © 2015, 2021 Günter Milde.                                  */
/* :License: Released under the terms of the `2-Clause BSD license`_,      */
/*    in short:                                                            */
/*                                                                         */
/*    Copying and distribution of this file, with or without modification, */
/*    are permitted in any medium without royalty provided the copyright   */
/*    notice and this notice are preserved.                                */
/*                                                                         */
/*    This file is offered as-is, without any warranty.                    */
/*                                                                         */
/* .. _2-Clause BSD license: http://www.spdx.org/licenses/BSD-2-Clause     */

/* This CSS3 stylesheet defines rules for Docutils elements without        */
/* HTML equivalent. It is required to make the document semantics visible. */
/*                                                                         */
/* .. _validates: http://jigsaw.w3.org/css-validator/validator$link        */

/* titles */
p.topic-title,
p.admonition-title,
p.system-message-title {
  font-weight: bold;
}
p.sidebar-title,
p.rubric {
  font-weight: bold;
  font-size: larger;
}
p.rubric {
  color: maroon;
}
p.subtitle,
p.section-subtitle,
p.sidebar-subtitle {
  font-weight: bold;
  margin-top: -0.5em;
}
h1 + p.subtitle {
  font-size: 1.6em;
}
a.toc-backref {
  color: inherit;
  text-decoration: none;
}

/* Warnings, Errors */
.system-messages h2,
.system-message-title,
span.problematic {
  color: red;
}

/* Inline Literals */
.docutils.literal {
  font-family: monospace;
  white-space: pre-wrap;
}
/* do not wrap at hyphens and similar: */
.literal > span.pre { white-space: nowrap; }

/* Lists */

/* compact and simple lists: no margin between items */
.simple  li, .simple  ul, .simple  ol,
.compact li, .compact ul, .compact ol,
.simple  > li p, dl.simple  > dd,
.compact > li p, dl.compact > dd {
  margin-top: 0;
  margin-bottom: 0;
}
/* Nested Paragraphs */
p:first-child { margin-top: 0; }
p:last-child { margin-bottom: 0; }
details > p:last-child { margin-bottom: 1em; }

/* Table of Contents */
.contents ul.auto-toc { /* section numbers present */
  list-style-type: none;
}

/* Enumerated Lists */
ol.arabic     { list-style: decimal }
ol.loweralpha { list-style: lower-alpha }
ol.upperalpha { list-style: upper-alpha }
ol.lowerroman { list-style: lower-roman }
ol.upperroman { list-style: upper-roman }

/* Definition Lists and Derivatives */
dt .classifier { font-style: italic }
dt .classifier:before {
  font-style: normal;
  margin: 0.5em;
  content: ":";
}
/* Field Lists and similar */
/* bold field name, content starts on the same line */
dl.field-list,
dl.option-list,
dl.docinfo {
  display: flow-root;
}
dl.field-list > dt,
dl.option-list > dt,
dl.docinfo > dt {
  font-weight: bold;
  clear: left;
  float: left;
  margin: 0;
  padding: 0;
  padding-right: 0.2em;
}
/* Offset for field content (corresponds to the --field-name-limit option) */
dl.field-list > dd,
dl.option-list > dd,
dl.docinfo > dd {
  margin-left:  9em; /* ca. 14 chars in the test examples, fit all Docinfo fields */
}
/* start nested lists on new line */
dd > dl:first-child,
dd > ul:first-child,
dd > ol:first-child {
  clear: left;
}
/* start field-body on a new line after long field names */
dl.field-list > dd > *:first-child,
dl.option-list > dd > *:first-child
{
  display: inline-block;
  width: 100%;
  margin: 0;
}

/* Bibliographic Fields (docinfo) */
dl.docinfo pre.address {
  font: inherit;
  margin: 0.5em 0;
}
dl.docinfo > dd.authors > p { margin: 0; }

/* Option Lists */
dl.option-list > dt { font-weight: normal; }
span.option { white-space: nowrap; }

/* Footnotes and Citations  */

.footnote, .citation { margin: 1em 0; } /* default paragraph skip (Firefox) */
/* hanging indent */
.citation { padding-left: 2em; }
.footnote { padding-left: 1.7em; }
.footnote.superscript { padding-left: 1.0em; }
.citation > .label { margin-left: -2em; }
.footnote > .label { margin-left: -1.7em; }
.footnote.superscript > .label { margin-left: -1.0em; }

.footnote > .label + *,
.citation > .label + * {
  display: inline-block;
  margin-top: 0;
  vertical-align: top;
}
.footnote > .backrefs + *,
.citation > .backrefs + * {
  margin-top: 0;
}
.footnote > .label + p, .footnote > .backrefs + p,
.citation > .label + p, .citation > .backrefs + p {
  display: inline;
  vertical-align: inherit;
}

.backrefs { user-select: none; }
.backrefs > a { font-style: italic; }

/* superscript footnotes */
a[role="doc-noteref"].superscript,
.footnote.superscript > .label,
.footnote.superscript > .backrefs {
  vertical-align: super;
  font-size: smaller;
  line-height: 1;
}
a[role="doc-noteref"].superscript > .fn-bracket,
.footnote.superscript > .label > .fn-bracket {
  /* hide brackets in display but leave for copy/paste */
  display: inline-block;
  width: 0;
  overflow: hidden;
}
[role="doc-noteref"].superscript + [role="doc-noteref"].superscript {
  padding-left: 0.15em; /* separate consecutive footnote references */
  /* TODO: unfortunately, "+" also selects with text between the references. */
}

/* Alignment */
.align-left   {
  text-align: left;
  margin-right: auto;
}
.align-center {
  text-align: center;
  margin-left: auto;
  margin-right: auto;
}
.align-right  {
  text-align: right;
  margin-left: auto;
}
.align-top    { vertical-align: top; }
.align-middle { vertical-align: middle; }
.align-bottom { vertical-align: bottom; }

/* reset inner alignment in figures and tables */
figure.align-left, figure.align-right,
table.align-left, table.align-center, table.align-right {
  text-align: inherit;
}

/* Text Blocks */
.topic { margin: 1em 2em; }
.sidebar,
.admonition,
.system-message {
  margin: 1em 2em;
  border: thin solid;
  padding: 0.5em 1em;
}
div.line-block { display: block; }
div.line-block div.line-block, pre { margin-left: 2em; }

/* Code line numbers: dropped when copying text from the page */
pre.code .ln { display: none; }
pre.code code:before {
  content: attr(data-lineno); /* …, none) fallback not supported by any browser */
  color: gray;
}

/* Tables */
table {
  border-collapse: collapse;
}
td, th {
  border: thin solid silver;
  padding: 0 1ex;
}
.borderless td, .borderless th {
  border: 0;
  padding: 0;
  padding-right: 0.5em /* separate table cells */
}

table > caption {
  text-align: left;
  margin-top: 0.2em;
  margin-bottom: 0.2em;
}
table.captionbelow {
  caption-side: bottom;
}

/* Document Header and Footer */
header { border-bottom: 1px solid black; }
footer { border-top: 1px solid black; }

/* Images are block-level by default in Docutils */
/* New HTML5 block elements: set display for older browsers */
img, header, footer, main, aside, nav, section, figure, video, details {
  display: block;
}
/* inline images */
p img, p video, figure img, figure video {
  display: inline;
}

</style>
<style type="text/css">

/* CSS31_ style sheet for the output of Docutils HTML writers.             */
/* Rules for easy reading and pre-defined style variants.                  */
/*                                                                         */
/* :Author: Günter Milde, based on html4css1.css by David Goodger          */
/* :Id: $Id: plain.css 9338 2023-04-08 21:08:47Z milde $                                                               */
/* :Copyright: © 2015 Günter Milde.                                        */
/* :License: Released under the terms of the `2-Clause BSD license`_,      */
/*    in short:                                                            */
/*                                                                         */
/*    Copying and distribution of this file, with or without modification, */
/*    are permitted in any medium without royalty provided the copyright   */
/*    notice and this notice are preserved.                                */
/*                                                                         */
/*    This file is offered as-is, without any warranty.                    */
/*                                                                         */
/* .. _2-Clause BSD license: http://www.spdx.org/licenses/BSD-2-Clause     */
/* .. _CSS3: https://www.w3.org/Style/CSS/                                 */


/* Document Structure */
/* ****************** */

/* "page layout" */
body {
  margin: 0;
  background-color: #dbdbdb;
  --field-indent: 9em; /* default indent of fields in field lists */
}
main, footer, header {
  line-height:1.6;
  /* avoid long lines --> better reading */
  /* optimum is 45…75 characters/line <http://webtypography.net/2.1.2> */
  /* OTOH: lines should not be too short because of missing hyphenation, */
  max-width: 50rem;
  padding: 1px 2%; /* 1px on top avoids grey bar above title (mozilla) */
  margin: auto;
}
main {
  counter-reset: table figure;
  background-color: white;
}
footer, header {
  font-size: smaller;
  padding: 0.5em 2%;
  border: none;
}

/* Table of Contents */
ul.auto-toc > li > p {
  padding-left: 1em;
  text-indent: -1em;
}
nav.contents ul {
  padding-left: 1em;
}
main > nav.contents ul ul ul ul:not(.auto-toc) {
  list-style-type: '\2B29\ ';
}
main > nav.contents ul ul ul ul ul:not(.auto-toc) {
  list-style-type: '\2B1D\ ';
}

/* Transitions */
hr.docutils {
  width: 80%;
  margin-top: 1em;
  margin-bottom: 1em;
  clear: both;
}

/* Paragraphs */

/* vertical space (parskip) */
p, ol, ul, dl, li,
div.line-block,
.footnote, .citation,
div > math,
table {
  margin-top: 0.5em;
  margin-bottom: 0.5em;
}

h1, h2, h3, h4, h5, h6,
dd, details > p:last-child {
  margin-bottom: 0.5em;
}

/* Lists */
/* ===== */

/* Definition Lists */
/* Indent lists nested in definition lists */
dd > ul:only-child, dd > ol:only-child { padding-left: 1em; }

/* Description Lists */
/* styled like in most dictionaries, encyclopedias etc. */
dl.description {
  display: flow-root;
}
dl.description > dt {
  font-weight: bold;
  clear: left;
  float: left;
  margin: 0;
  padding: 0;
  padding-right: 0.3em;
}
dl.description > dd:after {
  display: table;
  content: "";
  clear: left; /* clearfix for empty descriptions */
}

/* Field Lists */

dl.field-list > dd,
dl.docinfo > dd {
  margin-left: var(--field-indent); /* adapted in media queries or HTML */
}

/* example for custom field-name width */
dl.field-list.narrow > dd {
  --field-indent: 5em;
}
/* run-in: start field-body on same line after long field names */
dl.field-list.run-in > dd p {
  display: block;
}

/* Bibliographic Fields */

/* generally, bibliographic fields use dl.docinfo */
/* but dedication and abstract are placed into divs */
div.abstract p.topic-title {
  text-align: center;
}
div.dedication {
  margin: 2em 5em;
  text-align: center;
  font-style: italic;
}
div.dedication p.topic-title {
  font-style: normal;
}

/* disclosures */
details { padding-left: 1em; }
summary { margin-left: -1em; }

/* Text Blocks */
/* =========== */

/* Literal Blocks */
pre.literal-block, pre.doctest-block,
pre.math, pre.code {
  font-family: monospace;
}

/* Block Quotes and Topics */
bockquote { margin: 1em 2em; }
blockquote p.attribution,
.topic p.attribution {
  text-align: right;
  margin-left: 20%;
}

/* Tables */
/* ====== */

/* th { vertical-align: bottom; } */

table tr { text-align: left; }

/* "booktabs" style (no vertical lines) */
table.booktabs {
  border: 0;
  border-top: 2px solid;
  border-bottom: 2px solid;
  border-collapse: collapse;
}
table.booktabs * {
  border: 0;
}
table.booktabs th {
  border-bottom: thin solid;
}

/* numbered tables (counter defined in div.document) */
table.numbered > caption:before {
  counter-increment: table;
  content: "Table " counter(table) ": ";
  font-weight: bold;
}

/* Explicit Markup Blocks */
/* ====================== */

/* Footnotes and Citations */
/* ----------------------- */

/* line on the left */
.footnote-list {
  border-left: solid thin;
  padding-left: 0.25em;
}

/* Directives */
/* ---------- */

/* Body Elements */
/* ~~~~~~~~~~~~~ */

/* Images and Figures */

/* let content flow to the side of aligned images and figures */
figure.align-left,
img.align-left,
video.align-left,
object.align-left {
  clear: left;
  float: left;
  margin-right: 1em;
}
figure.align-right,
img.align-right,
video.align-right,
object.align-right {
  clear: right;
  float: right;
  margin-left: 1em;
}
/* Stop floating sidebars, images and figures */
h1, h2, h3, h4, footer, header { clear: both; }

/* Numbered figures */
figure.numbered > figcaption > p:before {
  counter-increment: figure;
  content: "Figure " counter(figure) ": ";
  font-weight: bold;
}

/* Admonitions and System Messages */
.caution p.admonition-title,
.attention p.admonition-title,
.danger p.admonition-title,
.error p.admonition-title,
.warning p.admonition-title,
div.error {
  color: red;
}

/* Sidebar */
/* Move right. In a layout with fixed margins, */
/* it can be moved into the margin.            */
aside.sidebar {
  width: 30%;
  max-width: 26em;
  float: right;
  clear: right;
  margin-left: 1em;
  margin-right: -1%;
  background-color: #fffffa;
}


/* Code */
pre.code { padding: 0.7ex }
pre.code, code { background-color: #eeeeee }
/* basic highlighting: for a complete scheme, see */
/* https://docutils.sourceforge.io/sandbox/stylesheets/ */
pre.code .comment, code .comment { color: #5C6576 }
pre.code .keyword, code .keyword { color: #3B0D06; font-weight: bold }
pre.code .literal.string, code .literal.string { color: #0C5404 }
pre.code .name.builtin, code .name.builtin { color: #352B84 }
pre.code .deleted, code .deleted { background-color: #DEB0A1}
pre.code .inserted, code .inserted { background-color: #A3D289}

/* Math */
/* for math-output=MathML (for math-output=HTML, see math.css) */
math .boldsymbol {
  font-weight: bold;
}
mstyle.mathscr, mi.mathscr {
  font-family: STIX, XITSMathJax_Script, rsfs10,
               "Asana Math", Garamond, cursive;
}

/* Epigraph           */
/* Highlights         */
/* Pull-Quote         */
/* Compound Paragraph */
/* Container          */

/* Inline Markup */
/* ============= */

sup, sub { line-height: 0.8; } /* do not add leading for lines with sup/sub */

/* Inline Literals                                          */
/* possible values: normal, nowrap, pre, pre-wrap, pre-line */
/*   span.docutils.literal { white-space: pre-wrap; }       */

/* Hyperlink References */
a { text-decoration: none; }

/* External Targets       */
/*   span.target.external */
/* Internal Targets       */
/*   span.target.internal */
/* Footnote References    */
/*   a[role="doc-noteref"] */
/* Citation References    */
/*   a.citation-reference */

</style>
</head>
<body class="with-toc">
<main id="database-test-2-dbt-2-documentation">
<h1 class="title">Database Test 2 (DBT-2) Documentation</h1>

<pre class="literal-block">Open Source Development Labs, Inc.
12725 SW Millikan Way, Suite 400
Beaverton, OR 97005
Phone: (503) 626-2455
Fax: (503) 626-2436
Email: info&#64;osdl.org</pre>
<p>Copyright (c) 2002 by The Open Source Development Laboratory, Inc. This
material may be distributed only subject to the terms and conditions set forth
in the Open Publication License, v1.0 or later (the latest version is currently
available at <a class="reference external" href="http://www.opencontent.org/openpub/">http://www.opencontent.org/openpub/</a>). Distribution of
substantively modified versions of this document is prohibited without the
explicit permission of the copyright holder.</p>
<p>Other company, product or service names may be trademarks or service marks of
others.</p>
<nav class="contents" id="table-of-contents" role="doc-toc">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#introduction" id="toc-entry-1">Introduction</a></p></li>
<li><p><a class="reference internal" href="#differences-from-the-tpc-c" id="toc-entry-2">Differences from the TPC-C</a></p>
<ul>
<li><p><a class="reference internal" href="#introduction-1" id="toc-entry-3">Introduction</a></p></li>
<li><p><a class="reference internal" href="#database-design" id="toc-entry-4">Database Design</a></p></li>
<li><p><a class="reference internal" href="#database-scaling" id="toc-entry-5">Database Scaling</a></p></li>
<li><p><a class="reference internal" href="#transactions" id="toc-entry-6">Transactions</a></p>
<ul>
<li><p><a class="reference internal" href="#payment" id="toc-entry-7">Payment</a></p></li>
<li><p><a class="reference internal" href="#delivery" id="toc-entry-8">Delivery</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#acid-properties" id="toc-entry-9">Acid Properties</a></p></li>
<li><p><a class="reference internal" href="#performance-metrics" id="toc-entry-10">Performance Metrics</a></p></li>
<li><p><a class="reference internal" href="#driver" id="toc-entry-11">Driver</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#architecture" id="toc-entry-12">Architecture</a></p>
<ul>
<li><p><a class="reference internal" href="#tpc-c" id="toc-entry-13">TPC-C</a></p></li>
<li><p><a class="reference internal" href="#dbt-2" id="toc-entry-14">DBT-2</a></p></li>
<li><p><a class="reference internal" href="#improper-comparisons" id="toc-entry-15">Improper Comparisons</a></p></li>
<li><p><a class="reference internal" href="#design" id="toc-entry-16">Design</a></p>
<ul>
<li><p><a class="reference internal" href="#database" id="toc-entry-17">Database</a></p>
<ul>
<li><p><a class="reference internal" href="#new-order-transaction" id="toc-entry-18">New-Order Transaction</a></p></li>
<li><p><a class="reference internal" href="#payment-transaction" id="toc-entry-19">Payment Transaction</a></p></li>
<li><p><a class="reference internal" href="#order-status-transaction" id="toc-entry-20">Order-Status Transaction</a></p></li>
<li><p><a class="reference internal" href="#delivery-transaction" id="toc-entry-21">Delivery Transaction</a></p></li>
<li><p><a class="reference internal" href="#stock-level-transaction" id="toc-entry-22">Stock-Level Transaction</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#remote-terminal-emulators" id="toc-entry-23">Remote Terminal Emulators</a></p></li>
<li><p><a class="reference internal" href="#clients" id="toc-entry-24">Clients</a></p></li>
</ul>
</li>
</ul>
</li>
<li><p><a class="reference internal" href="#quick-start" id="toc-entry-25">Quick Start</a></p>
<ul>
<li><p><a class="reference internal" href="#postgresql" id="toc-entry-26">PostgreSQL</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#user-guide" id="toc-entry-27">User Guide</a></p>
<ul>
<li><p><a class="reference internal" href="#setup" id="toc-entry-28">Setup</a></p>
<ul>
<li><p><a class="reference internal" href="#external-software-dependencies" id="toc-entry-29">External Software Dependencies</a></p></li>
<li><p><a class="reference internal" href="#linux-appimage" id="toc-entry-30">Linux AppImage</a></p></li>
<li><p><a class="reference internal" href="#dbt-2-test-kit-source" id="toc-entry-31">DBT-2 Test Kit Source</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#environment-configuration" id="toc-entry-32">Environment Configuration</a></p>
<ul>
<li><p><a class="reference internal" href="#multi-tier-system-testing" id="toc-entry-33">Multi-tier System Testing</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#building-the-database" id="toc-entry-34">Building the Database</a></p>
<ul>
<li><p><a class="reference internal" href="#sizing-consideration" id="toc-entry-35">Sizing Consideration</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#running-the-test-kit" id="toc-entry-36">Running the Test Kit</a></p>
<ul>
<li><p><a class="reference internal" href="#the-easy-way" id="toc-entry-37">The &quot;Easy&quot; Way</a></p>
<ul>
<li><p><a class="reference internal" href="#postgresql-1" id="toc-entry-38">PostgreSQL</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#manual-test-execution" id="toc-entry-39">Manual Test Execution</a></p></li>
<li><p><a class="reference internal" href="#comprehensive-test-execution" id="toc-entry-40">Comprehensive Test Execution</a></p>
<ul>
<li><p><a class="reference internal" href="#executing-with-multiple-tiers" id="toc-entry-41">Executing with multiple tiers</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#multi-process-driver-execution" id="toc-entry-42">Multi-process driver execution</a></p></li>
<li><p><a class="reference internal" href="#keying-and-thinking-time" id="toc-entry-43">Keying and Thinking Time</a></p></li>
<li><p><a class="reference internal" href="#transaction-mix" id="toc-entry-44">Transaction Mix</a></p></li>
<li><p><a class="reference internal" href="#complex-test-configurations" id="toc-entry-45">Complex Test Configurations</a></p>
<ul>
<li><p><a class="reference internal" href="#example-1-1-tier-threaded-driver-client" id="toc-entry-46">Example 1: 1-tier Threaded Driver &amp; Client</a></p></li>
<li><p><a class="reference internal" href="#example-2-1-tier-multiple-threaded-drivers-clients" id="toc-entry-47">Example 2: 1-tier Multiple Threaded Drivers &amp; Clients</a></p></li>
<li><p><a class="reference internal" href="#example-3-3-tier-threaded-driver-client" id="toc-entry-48">Example 3: 3-tier Threaded Driver &amp; Client</a></p></li>
<li><p><a class="reference internal" href="#example-4-3-tier-threaded-driver-client" id="toc-entry-49">Example 4: 3-tier Threaded Driver &amp; Client</a></p></li>
<li><p><a class="reference internal" href="#example-5-1-tier-event-driven-driver" id="toc-entry-50">Example 5: 1-tier Event-Driven Driver</a></p></li>
<li><p><a class="reference internal" href="#example-6-1-tier-multiple-event-driven-drivers" id="toc-entry-51">Example 6: 1-tier multiple event-driven drivers</a></p></li>
<li><p><a class="reference internal" href="#example-7-2-tier-event-driven-driver" id="toc-entry-52">Example 7: 2-tier Event-Driven Driver</a></p></li>
<li><p><a class="reference internal" href="#example-8-2-tier-multiple-event-driven-drivers" id="toc-entry-53">Example 8: 2-tier Multiple Event-Driven Drivers</a></p></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p><a class="reference internal" href="#database-management-system-notes" id="toc-entry-54">Database Management System Notes</a></p>
<ul>
<li><p><a class="reference internal" href="#cockroachdb" id="toc-entry-55">CockroachDB</a></p></li>
<li><p><a class="reference internal" href="#mysql" id="toc-entry-56">MySQL</a></p>
<ul>
<li><p><a class="reference internal" href="#comments" id="toc-entry-57">COMMENTS</a></p></li>
<li><p><a class="reference internal" href="#multi-tier-testing" id="toc-entry-58">MULTI-TIER TESTING</a></p></li>
<li><p><a class="reference internal" href="#preparation-for-test" id="toc-entry-59">PREPARATION FOR TEST</a></p></li>
<li><p><a class="reference internal" href="#run-test" id="toc-entry-60">RUN TEST</a></p></li>
<li><p><a class="reference internal" href="#postrunning-analyses" id="toc-entry-61">POSTRUNNING ANALYSES</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#postgresql-2" id="toc-entry-62">PostgreSQL</a></p>
<ul>
<li><p><a class="reference internal" href="#setup-1" id="toc-entry-63">Setup</a></p>
<ul>
<li><p><a class="reference internal" href="#v7-3" id="toc-entry-64">v7.3</a></p></li>
<li><p><a class="reference internal" href="#v7-4" id="toc-entry-65">v7.4</a></p></li>
<li><p><a class="reference internal" href="#v8-0" id="toc-entry-66">v8.0</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#a-really-quick-howto" id="toc-entry-67">A really quick howto</a></p></li>
<li><p><a class="reference internal" href="#building-the-database-1" id="toc-entry-68">Building the Database</a></p></li>
<li><p><a class="reference internal" href="#environment-configuration-1" id="toc-entry-69">Environment Configuration</a></p></li>
<li><p><a class="reference internal" href="#tablespace-notes" id="toc-entry-70">Tablespace Notes</a></p></li>
<li><p><a class="reference internal" href="#appimage-notes" id="toc-entry-71">AppImage Notes</a></p>
<ul>
<li><p><a class="reference internal" href="#limitations" id="toc-entry-72">Limitations</a></p></li>
</ul>
</li>
</ul>
</li>
<li><p><a class="reference internal" href="#sap-db" id="toc-entry-73">SAP DB</a></p>
<ul>
<li><p><a class="reference internal" href="#setup-2" id="toc-entry-74">Setup</a></p></li>
<li><p><a class="reference internal" href="#odbc" id="toc-entry-75">ODBC</a></p></li>
<li><p><a class="reference internal" href="#building-the-database-2" id="toc-entry-76">Building the Database</a></p></li>
<li><p><a class="reference internal" href="#results" id="toc-entry-77">Results</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#sqlite" id="toc-entry-78">SQLite</a></p></li>
<li><p><a class="reference internal" href="#yugabytedb" id="toc-entry-79">YugabyteDB</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#operating-system-notes" id="toc-entry-80">Operating System Notes</a></p>
<ul>
<li><p><a class="reference internal" href="#linux" id="toc-entry-81">Linux</a></p></li>
<li><p><a class="reference internal" href="#solaris" id="toc-entry-82">Solaris</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#developer-guide" id="toc-entry-83">Developer Guide</a></p>
<ul>
<li><p><a class="reference internal" href="#building-the-kit" id="toc-entry-84">Building the Kit</a></p></li>
<li><p><a class="reference internal" href="#testing-the-kit" id="toc-entry-85">Testing the Kit</a></p>
<ul>
<li><p><a class="reference internal" href="#datagen" id="toc-entry-86">datagen</a></p></li>
<li><p><a class="reference internal" href="#post-process" id="toc-entry-87">post-process</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#appimage" id="toc-entry-88">AppImage</a></p>
<ul>
<li><p><a class="reference internal" href="#building-the-appimage" id="toc-entry-89">Building the AppImage</a></p></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
<section id="introduction">
<h2><a class="toc-backref" href="#toc-entry-1" role="doc-backlink">Introduction</a></h2>
<p>The OSDL Database Test 2 (DBT-2) workload test kit provides an on-line
transaction processing (OLTP) workload using an open source database and a set
of defined transactions.  This document gives an overview of the DBT-2 test
kit.</p>
<p>The DBT-2 test kit is a derivative of a benchmark specification released by the
Transaction Processing Performance Council (TPC).  The TPC Benchmark(TM) C
(TPC-C) is briefly described before the DBT-2 test kit is discussed.</p>
</section>
<section id="differences-from-the-tpc-c">
<h2><a class="toc-backref" href="#toc-entry-2" role="doc-backlink">Differences from the TPC-C</a></h2>
<section id="introduction-1">
<h3><a class="toc-backref" href="#toc-entry-3" role="doc-backlink">Introduction</a></h3>
<p>The purpose of this document is to list the places where the OSDL Database Test
2 (DBT-2) test kit deviates from the TPC-C Standard Specification Revision 5.0
(<a class="reference external" href="http://www.tpc.org/tpcc/">http://www.tpc.org/tpcc/</a>).  DBT-2 may use terminology similar to benchmarks
from the TPC or other, but such similarity does not in any way imply any
comparable relationship with any other benchmark.</p>
</section>
<section id="database-design">
<h3><a class="toc-backref" href="#toc-entry-4" role="doc-backlink">Database Design</a></h3>
<ul class="simple">
<li><p>All required fields are not returned to the terminal.</p></li>
<li><p>The kit currently does not use foreign keys to enforce any integrity
constraints.  (Clause 1.3)</p></li>
<li><p>Storage space for a 60-day period is not determined.  (Clause 4.2.3)</p></li>
</ul>
</section>
<section id="database-scaling">
<h3><a class="toc-backref" href="#toc-entry-5" role="doc-backlink">Database Scaling</a></h3>
<ul class="simple">
<li><p>By default the data generator for the database scales the database properly
based on the number of warehouses built.  The scale for all the tables,
except <cite>DISTRICT</cite> and <cite>ORDER_LINE</cite>, can be manually overridden.  (Clause
1.4.3)</p></li>
</ul>
</section>
<section id="transactions">
<h3><a class="toc-backref" href="#toc-entry-6" role="doc-backlink">Transactions</a></h3>
<section id="payment">
<h4><a class="toc-backref" href="#toc-entry-7" role="doc-backlink">Payment</a></h4>
<ul class="simple">
<li><p>In the case where the selected customer has bad credit, the original c_data
is not appended to the new <cite>c_data</cite> updated for the customer.  (Clause
2.5.2.2) [SAP DB]</p></li>
</ul>
</section>
<section id="delivery">
<h4><a class="toc-backref" href="#toc-entry-8" role="doc-backlink">Delivery</a></h4>
<ul class="simple">
<li><p>Delivery transactions are not queued and deferred, but are executed
immediately.  (Clause 2.7.2.1)</p></li>
<li><p>Statistics are not collected for the case when deliveries are not made for a
district.  (Clause 2.7.2.3)</p></li>
</ul>
</section>
</section>
<section id="acid-properties">
<h3><a class="toc-backref" href="#toc-entry-9" role="doc-backlink">Acid Properties</a></h3>
<ul class="simple">
<li><p>Test have not been designed to test the ACID properties of the database.
(Clause 3)</p></li>
</ul>
</section>
<section id="performance-metrics">
<h3><a class="toc-backref" href="#toc-entry-10" role="doc-backlink">Performance Metrics</a></h3>
<ul class="simple">
<li><p>The reported throughput does not have a minimum required throughput.
(Clause 4.1.3)</p></li>
<li><p>DBT-2 does not require reporting (Clause 5.6) nor does it require a full
disclosure report be published (Clause 8).  An independent audit is also not
required.  (Clause 9)</p></li>
<li><p>The pricing of the system under test is not calculated.  (Clause 7)</p></li>
</ul>
</section>
<section id="driver">
<h3><a class="toc-backref" href="#toc-entry-11" role="doc-backlink">Driver</a></h3>
<ul class="simple">
<li><p>The driver is currently designed to work with a client program to reduce the
number of connections to the database.  The driver can be used in a way such
that it implements most of the client code directly to reduce the number of
connections to the database from the driver program directly, instead of
opening a database connection per terminal emulated.  (Clause 6.1)</p></li>
<li><p>The mix of the transactions conforms to the TPC-C specification by default,
but it can be adjusted outside the restrictions placed in the specification.
(Clause 5.2.3)</p></li>
<li><p>The Keying Time and Thinking Time is constant but can be user defined.
(Clause 5.2.5.7)</p></li>
<li><p>A maximum 90th percentile response time is not required.  (Clause 5.2.5.3)</p></li>
</ul>
</section>
</section>
<section id="architecture">
<h2><a class="toc-backref" href="#toc-entry-12" role="doc-backlink">Architecture</a></h2>
<p>This section briefly recaps the TPC-C, and then describes how DBT-2 implements
the TPC-C specification.</p>
<section id="tpc-c">
<h3><a class="toc-backref" href="#toc-entry-13" role="doc-backlink">TPC-C</a></h3>
<p>The TPC-C represents the database activities of any industry that manages,
sells, and distributes a product or service, such as car rental agencies,
food distribution companies, and parts suppliers.  The simulated business
model mimics a wholesale parts supplier that operates out of a number of
warehouses and their associated sales districts. Each warehouse has ten sales
districts and each district servers three thousand customers.  A user from a
sales district can select at any time one of five operations from the order
entry system:  entering new orders, delivering orders, tracking payment for
orders, checking the status of the orders, or monitoring the level of stock
at a specified warehouse.</p>
<p>The most frequent transaction consists of entering a new order that is
comprised of an average of ten line items.  Each warehouse maintains stock
for 100,000 items and attempts to fill orders from that stock.  To simulate
realistic events, such as the case where a particular warehouse may not have
the item in stock, the TPC-C benchmark requires that close to 10% of all
orders must be supplied by another warehouse (i.e. 10% of all orders are not
in stock at the warehouse where the order is entered).</p>
<p>Another heavily weighted transaction is the recording of payments from
customers.  Delivering orders, stock level checks, and inquiring about the
status of certain orders are less frequently executed transactions.</p>
<p>The level of throughput is a result of the activity of the users executing
database transactions.  For each warehouse, ten terminals are simulated to
access the database.  The final throughput of the benchmark is directly
related to the number of warehouses the database is scaled to.  A remote
terminal emulator (RTE) is used to maintain the required mix of transactions
over run duration of the workload.  The mix represents the complete business
processing of an order as it is entered, paid for, checked , and delivered.
The primary metric of a TPC-C benchmark is the number of New-Order
transactions executed per minute, designated as tpmC.</p>
<p>TPC-C consists of five transactions of varying complexity.  These
transactions exorcises a database's ability to maintain data integrity,
accesses data of varying sizes, and handles contention on accesses and
updates.  The transactions are called New-Order, Payment, Order-Status,
Delivery, and Stock-Level.</p>
<p>For more information on the TPC, see their web site at: <a class="reference external" href="http://www.tpc.org/">http://www.tpc.org/</a>.
Further information on the TPC-C can be found on the web at:
<a class="reference external" href="http://www.tpc.org/tpcc/">http://www.tpc.org/tpcc/</a>.</p>
</section>
<section id="dbt-2">
<h3><a class="toc-backref" href="#toc-entry-14" role="doc-backlink">DBT-2</a></h3>
<p>DBT-2 is a derivative of the TPC-C designed to produce a real-world
on-line OLTP workload, similar to the TPC-C, to stress the Linux operation
system without the complexity and expense of running a TPC benchmark.</p>
<p>TPC benchmarks are intended as competitive marketing tools.  The TPC requires
all published results to comply with strict publication and auditing rules to
ensure fair comparisons between competitors.  The TPC also requires the
general availability and disclosure of the pricing for all products used for
the benchmark.  It is impractical for open source development projects to
adhere to these rules; thus, the results reported by the DBT-2 test kit
do not constitute a TPC-C result, and are incomparable with any TPC-C
benchmark.</p>
<p>The primary metric reported by the DBT-2 workload is the number of New-Order
transactions executed per minute and is expressed as NOTPM (New Order
Transactions per Minute).  However, NOTPM's do not and should not be compared
to tpmC measurements in any way since the DBT-2 workload does not constitute a
compliant TPC-C benchmark.</p>
</section>
<section id="improper-comparisons">
<h3><a class="toc-backref" href="#toc-entry-15" role="doc-backlink">Improper Comparisons</a></h3>
<p>If you discover any usage of DBT-2 in drawing conclusions about TPC-C
performance, this inappropriate usage should be reported to both the TPC and
to the OSDL:</p>
<ul class="simple">
<li><p>TPC - <a class="reference external" href="mailto:admin&#64;tpc.org">admin&#64;tpc.org</a></p></li>
<li><p>OSDL - <a class="reference external" href="mailto:wookie&#64;osdl.org">wookie&#64;osdl.org</a></p></li>
</ul>
</section>
<section id="design">
<h3><a class="toc-backref" href="#toc-entry-16" role="doc-backlink">Design</a></h3>
<p>This kit is composed of three main components, as illustrated in Figure 1: a
database, remote terminal emulators, and clients.  There can be multiple
terminals that connect to multiple terminal concentrators, which connect to a
single database.  Each component is described in the following sub-sections.</p>
<img alt="Component Diagram" src="component.png" style="width: 600px;" />
<section id="database">
<h4><a class="toc-backref" href="#toc-entry-17" role="doc-backlink">Database</a></h4>
<p>The database consists of nine tables with supportint five transactions.  While
this test kit is currently primarily maintained for PostgreSQL, it can be
adapted to any other database.  The data represents a company that is a
wholesale supplier with a number of distributed sales districts and associated
warehouses covering a wide geographic range.  The database can be scaled to any
number of warehouses to simulate businesses of varying sizes.  By default, a
warehouse covers 10 districts, each district serving 3,000 customers, with each
warehouse maintaining stock for a complete inventory of 100,000 items.  DBT-2
allows the rest of the database to be scaled as defined by the user.  The five
transactions supported are: New-Order, Payment, Order-Status, Delivery, and
Stock-Level.</p>
<section id="new-order-transaction">
<h5><a class="toc-backref" href="#toc-entry-18" role="doc-backlink">New-Order Transaction</a></h5>
<p>The New-Order transaction is a mid-weight, read-write single database
transaction designed to reflect on-line database activity typically found in
production environments.  The transaction performs seven to seventeen row
selections, six to sixteen row selections with updates, and seven to
seventeen row insertions, and is executed 45% of the time.</p>
</section>
<section id="payment-transaction">
<h5><a class="toc-backref" href="#toc-entry-19" role="doc-backlink">Payment Transaction</a></h5>
<p>The Payment transaction is a light-weight, read-write database transaction
that updates a customer's balance and reflects payment on a district's and
warehouse's sales statistics.  The transaction performs an average of two row
selections, six row selections with updates, and two row insertions, and is
executed 43% of the time.</p>
</section>
<section id="order-status-transaction">
<h5><a class="toc-backref" href="#toc-entry-20" role="doc-backlink">Order-Status Transaction</a></h5>
<p>The Order-Status transaction is a mid-weight read-only data transaction that
queries the status of a customer's most recent order.  The transaction
performs two row selections and nine to nineteen row selections with updates,
and is executed 4% of the time.</p>
</section>
<section id="delivery-transaction">
<h5><a class="toc-backref" href="#toc-entry-21" role="doc-backlink">Delivery Transaction</a></h5>
<p>The Delivery transaction is a database transaction that processes up to ten
new orders.  The transaction performs two row selections, six to sixteen row
selections with updates, and one row deletion, and is executed 4% of the time.</p>
</section>
<section id="stock-level-transaction">
<h5><a class="toc-backref" href="#toc-entry-22" role="doc-backlink">Stock-Level Transaction</a></h5>
<p>The Stock-Level transaction is a heavy read-only database transaction that
determines the number of recently sold items that have a stock level below a
specific threshold.  The transaction performs up to 900 row selections and is
executed 4% of the time.</p>
</section>
</section>
<section id="remote-terminal-emulators">
<h4><a class="toc-backref" href="#toc-entry-23" role="doc-backlink">Remote Terminal Emulators</a></h4>
<p>A remote terminal emulator (RTE) simulates the activities of a person at a
terminal console executing one of the five transactions supported by the
database.  The RTE is designed to either connect to a client system in order
to access the database in a three-tier model.  The RTE is also designed so
that it can be controlled by an external process.  The external process is a
monitoring program that manages drivers across multiple systems.</p>
<p>The RTE is designed as a multi-threaded program where each thread of activity
represents a single terminal accessing the database.  Ten terminals are
simulated for every warehouse that the database is configured for.  Each
terminal records every interaction attempted and the response time from the
point where the request is sent to when the response has been received.</p>
</section>
<section id="clients">
<h4><a class="toc-backref" href="#toc-entry-24" role="doc-backlink">Clients</a></h4>
<p>The clients are terminal concentrators that allows more than one terminal to
share a connection to the database system.  The client program starts up a
listener to handle terminal requests and a pool of threads to process
transaction requests.  A new thread is created for each terminal connecting
to the client to.</p>
</section>
</section>
</section>
<section id="quick-start">
<h2><a class="toc-backref" href="#toc-entry-25" role="doc-backlink">Quick Start</a></h2>
<p>The fastest way to get started is to use a Linux x86_64 based system and to
download the latest AppImage from GitHub:
<a class="reference external" href="https://github.com/osdldbt/dbt2/releases">https://github.com/osdldbt/dbt2/releases</a></p>
<p>Rename the AppImage file to <strong>dbt2</strong> and make sure it is in your <cite>PATH</cite> and is
executable.</p>
<p>The rest of this section describes the easiest way to use this test kit per
database management system.  See the rest of the documentation for more
advanced uses.</p>
<section id="postgresql">
<h3><a class="toc-backref" href="#toc-entry-26" role="doc-backlink">PostgreSQL</a></h3>
<p>Start a PostgreSQL instance on the local system and make sure the local user
can connect to PostgreSQL.</p>
<p>Next build a database:</p>
<pre class="literal-block">dbt2 build pgsql</pre>
<p>Next run a test and save the results to directory named <cite>results</cite>:</p>
<pre class="literal-block">dbt2 run pgsql results</pre>
</section>
</section>
<section id="user-guide">
<h2><a class="toc-backref" href="#toc-entry-27" role="doc-backlink">User Guide</a></h2>
<p>This document provides instructions on how to set up and use the Open Source
Development Lab's Database Test 2 (DBT-2) test kit.  Database management
systems can be installed from source or packages, or a DBaaS option can
possibly be used.  This section provides the high level overview of how to use
the test kit.  See <strong>Database Management System Notes</strong> for more specific
details as it pertains to the database management system being tested, if
available.</p>
<p>There are two general ways to use this kit:</p>
<ol class="arabic simple">
<li><p>The <strong>Manual Test Execution</strong> section is not just how to run a test with
minimal assistance, but also minimal data collection.  In other words, the
kit only produces the test metrics and data to validate the correctness of
the test.  It is left to the tester to do any additional data collection to
characterize system behavior.  But there are no limitations on how one may
actually execute a test.</p></li>
<li><p>The <strong>Comprehensive Test Execution</strong> section details how to use the provided
shell scripts to fully characterize system behavior in addition to executing
a test.  This includes collecting system statistics as well and software
profiles.  There is not as much flexibility as running a test manually,
while intending to help ease system characterization work.  Scripts are also
provided to generate a report with all sorts of charts using gnuplot, in
HTML (using Docutils) and PDFs (using pandoc in conjunction with Docutils).</p></li>
</ol>
<p>The database management systems that are currently supported are:</p>
<ul class="simple">
<li><p>PostgreSQL</p></li>
<li><p>SQLite</p></li>
</ul>
<p>These database management systems are a work-in-progress:</p>
<ul class="simple">
<li><p>CockroachDB</p></li>
<li><p>YugabyteDB</p></li>
</ul>
<p>Databases management systems that have worked in the past but are not current:</p>
<ul class="simple">
<li><p>MySQL</p></li>
<li><p>SAP DB</p></li>
</ul>
<section id="setup">
<h3><a class="toc-backref" href="#toc-entry-28" role="doc-backlink">Setup</a></h3>
<section id="external-software-dependencies">
<h4><a class="toc-backref" href="#toc-entry-29" role="doc-backlink">External Software Dependencies</a></h4>
<p><a class="reference external" href="https://www.sqlite.org/index.html">SQLite3</a> is required to do basic
statistical calculations in order to report test metrics.</p>
<p>System and database statistic collection and post processing are handled by
<a class="reference external" href="https://gitlab.com/touchstone/touchstone-tools">Touchstone Tool</a>.  Install
this package, or its AppImage, in order to characterize system performance.
This package is included in the DBT-2 AppImage.</p>
<p>A test report can be generated with the aid of <a class="reference external" href="https://github.com/osdldbt/dbttools">DBT Tools</a>.  This package is included in the DBT-2
AppImage.</p>
<p><a class="reference external" href="https://www.gnuplot.info/">gnuplot</a> is used when generating charts.  This
package is also included in the DBT-2 AppImage.</p>
<p><a class="reference external" href="https://jqlang.github.io/jq/">jq</a> and <a class="reference external" href="https://github.com/gnprice/toml-cli">toml-cli</a> are required to use TOML configuration
files for executing tests.</p>
</section>
<section id="linux-appimage">
<h4><a class="toc-backref" href="#toc-entry-30" role="doc-backlink">Linux AppImage</a></h4>
<p>A Linux AppImage is available, intended for simplified use, albeit with reduced
functionality, on Linux based systems.  See <strong>Database Management System
Notes</strong> for specific usage and for any database management system specific
limitations.  The DBT-2 AppImage may not always be as capable as installing the
kit from source or from other pre-packaged distributions.</p>
<p>The DBT-2 AppImage must be installed on each system.  It is also recommended to
install the Touchstone Tools AppImage on each system when there are multiple
systems in use.</p>
<p>For ease of use, we recommend renaming the DBT-2 AppImage binary to <cite>dbt2</cite>, if
it hasn't already been done.  Examples in the documentation will assume it has
been renamed to <cite>dbt2</cite>.</p>
<p>If FUSE is not available, the AppImage is self-extracting and provides a script
<cite>AppRun</cite> that can be executed as if running the AppImage itself:</p>
<pre class="literal-block">dbt2-*.AppImage --extract-appimage
squashfs-root/AppRun</pre>
<p>Alternatively, one could also set <cite>PATH</cite> and <cite>LD_LIBRARTY_PATH</cite> manually to
include the extracted environment.</p>
</section>
<section id="dbt-2-test-kit-source">
<h4><a class="toc-backref" href="#toc-entry-31" role="doc-backlink">DBT-2 Test Kit Source</a></h4>
<p>The primary source repository of the kit can be found on GitHub at:
<a class="reference external" href="https://github.com/osdldbt/dbt2">https://github.com/osdldbt/dbt2</a></p>
</section>
</section>
<section id="environment-configuration">
<h3><a class="toc-backref" href="#toc-entry-32" role="doc-backlink">Environment Configuration</a></h3>
<p>The section explains how to configure various parts of the system before a test
can be executed.</p>
<p>The individual driver and client binaries (e.g. <cite>dbt2-driver</cite> and
<cite>dbt2-client</cite>) can be run directly (and you may want to depending on the
situation), but scripts, such as <cite>dbt2-run</cite>, are provided to make some testing
scenarios easier to execute.  It does this by taking advantage of password-less
<cite>ssh</cite> usage, but also requires additional environmental setup.  This <strong>User
Guide</strong> will not where applicable and the <strong>Database Management System Notes</strong>
may have additional notes depending on the database management system.</p>
<section id="multi-tier-system-testing">
<h4><a class="toc-backref" href="#toc-entry-33" role="doc-backlink">Multi-tier System Testing</a></h4>
<p>DBT-2 supports a 1-, 2-, and 3-tier client-server system configurations.
Whether the binaries are run by hand, or whether the supplied helper scripts
are used determine how much additional environmental setup is needed.</p>
<p>When using the <cite>dbt2-run</cite> script, which also supports helping execute a 1-, 2-,
and 3-tier system configuration tests, additional environment variables may
need to be set because a remote ssh environment may be more limited than a
normal login environment.  For example, if the scripts and binaries are
installed in <cite>/usr/local/bin</cite>, this path may not be in the path when using
<cite>ssh</cite> to execute commands locally.</p>
<p>Also password-less ssh keys needs to be set up to keep the scripts simple, the
kit needs to be installed in the same location on each system.  Each user must
also have sudo privileges, also without requiring a password.</p>
<p>The ssh server on each system may need to allow user environment processing.
To enable this, make the following change to the ssh server configuration file
(typically <cite>/etc/ssh/sshd_config</cite>) and restart the <cite>sshd</cite> daemon (see specific
instructions from the operating system in use):</p>
<pre class="literal-block">PermitUserEnvironment yes</pre>
<p>Some database specific examples are provided in the <cite>examples/</cite> directory.
Also see <strong>Database Management System Notes</strong> for more specific details per
database management system, if available.</p>
</section>
</section>
<section id="building-the-database">
<h3><a class="toc-backref" href="#toc-entry-34" role="doc-backlink">Building the Database</a></h3>
<p>The database needs to be created, and data needs to be loaded before testing
can begin.  It is recommended to build the database from the system itself, as
opposed to from a remote system, for performance reasons if possible.  See
<strong>Database Management System Notes</strong> for more specific instructions.  There may
be several options available depending on the database management system used.
For example, this kit may include scripts that help create the database
instance if one does not exist, install the database from source if the
software is not already installed, and even scripts to help configure the
database.</p>
<section id="sizing-consideration">
<h4><a class="toc-backref" href="#toc-entry-35" role="doc-backlink">Sizing Consideration</a></h4>
<p>The database can be built with as few as 1 warehouse.  A 1,000 warehouse
generates about 100 GiB of raw text data.  The size of the database ultimately
depends on the schema definition and the number of indexes built.</p>
<p>Not all of the warehouses need to be used.  For example, if the database is
built with 100 warehouses, 80 can be specified.  Specifying more than available
warehouses will results errors.  The test will continue to run, but will log
errors if a warehouse referenced does not exist.</p>
<p>If DBT-2 is used with standard transaction mix ratios, keying, and thinking
times, etc. then the maximum throughput is limited to <cite>12.86 x the number of
warehouses</cite>.  Thus if you want more throughput, the database size also needs to
be increased.  See Clause 4.1 in the TPC-C specification for a complete
explanation.</p>
<p>If non-standard ratios, times, etc. are used, the database should be resized to
match the measured throughput.  This could take multiple revisions if database
is tested to be undersized compared to the measured throughput.</p>
<p>Of course if you have any reasons to test outside of these recommendations, you
should feel free to do so.</p>
</section>
</section>
<section id="running-the-test-kit">
<h3><a class="toc-backref" href="#toc-entry-36" role="doc-backlink">Running the Test Kit</a></h3>
<p>There are a numbers of ways that DBT-2 can be executed.  In each of these
scenarios, it is required that the database has been created and loaded before
any test can run successfully.  There are several factors that may influence
the execution method you may want to use.  This section will outline some of
the scenarios and provide examples.</p>
<p>The general test execution plan is:</p>
<ol class="arabic simple">
<li><p>Start the database management system</p></li>
<li><p>Start the client (e.g. <cite>dbt2-client</cite>), this can be skipped if running with
the combined client-driver program <cite>dbt2-driver3</cite> (See examples to
understand whether not this is the method you want to use.)</p></li>
<li><p>Start the driver (e.g. <cite>dbt2-driver</cite>)</p></li>
<li><p>Process the test results</p></li>
</ol>
<p>There are multiple variants of the client and driver.</p>
<p>Client only:</p>
<ol class="arabic simple">
<li><p><cite>dbt2-client</cite> - a pthread based multi-threaded program where 1 thread is
created per database connection opened, and 1 thread is created per remote
terminal connection.</p></li>
<li><p><cite>dbt2-client2</cite> - an event-based multi-process program that is a work in
progress. (This is still in development and won't be mentioned elsewhere
until it is functionally complete.)</p></li>
</ol>
<p>Driver (remote terminal emulator) only:</p>
<ol class="arabic simple">
<li><p><cite>dbt2-driver</cite> - a pthread based multi-threaded program where 1 thread is
created per warehouse and district pair.</p></li>
<li><p><cite>dbt2-driver2</cite> - an event-based multi-process program that is a work in
progress. (This is still in development and won't be mentioned elsewhere
until it is functionally complete.)</p></li>
</ol>
<p>Client-Driver combined:</p>
<ol class="arabic simple">
<li><p><cite>dbt2-driver3</cite> - an event-based multi-progress program that spawns N (user
defined) number of processes per detected processor, where warehouses are
evenly partitioned between each process and an event timer is spawned for
every warehouse and district pair in each process.</p></li>
</ol>
<p>Using <cite>dbt2-client</cite> in conjunction with <cite>dbt2-driver</cite> is considered the most
traditional way to run the test.  <cite>dbt2-driver3</cite> was developed as a more
efficient and easier to use program to drive the workload.</p>
<section id="the-easy-way">
<h4><a class="toc-backref" href="#toc-entry-37" role="doc-backlink">The &quot;Easy&quot; Way</a></h4>
<p>There are many ways that this kit can be used.  What <em>easy</em> means here is that
many of the decisions are made for you:</p>
<ol class="arabic simple">
<li><p>Use the DBT-2 AppImage because it is packaged with database management
system client libraries and post processing analytical packages, thus
minimizing system software setup.</p></li>
<li><p>Use a system where the database is already running and you already created
a database, because these steps don't help with database installation or
configuration.</p></li>
<li><p>Use the event-driven multi-process driver, which opens 1 database connection
per processor on the system by default and minimizes the number of tiers
used for testing.</p></li>
<li><p>Do not use any keying or thinking time, thus letting the system be driven as
hard as possible depending on the number of available processors on the
system.</p></li>
</ol>
<p>The number of warehouses and the length of the test can still be specified.</p>
<p>The <strong>Database Management System Notes</strong> section may have additional database
management system specific notes.</p>
<p>The examples in this section assume that the DBT-2 AppImage has been renamed to
<cite>dbt2</cite> and is in the user's <cite>PATH</cite>.</p>
<section id="postgresql-1">
<h5><a class="toc-backref" href="#toc-entry-38" role="doc-backlink">PostgreSQL</a></h5>
<p>This example will connect to PostgreSQL based on what is in the user's
environment, as one would normally expect with core PostgreSQL utilities, but
additional arguments can be used to change the connection information.</p>
<p>Execute the following commands with default parameters to build a 1 warehouse
database with pl/pgsql stored functions, and run a 3 minute test:</p>
<pre class="literal-block">dbt2 build pgsql
dbt2 run pgsql /tmp/results</pre>
</section>
</section>
<section id="manual-test-execution">
<h4><a class="toc-backref" href="#toc-entry-39" role="doc-backlink">Manual Test Execution</a></h4>
<p>This method involves starting each of the components manually without any help
from any of the scripts.</p>
<p>The database needs to be manually started.</p>
<p>The next step is to start the client.  The command line parameters depends on
the database management system tested so please review the help (<cite>-h</cite>) and
<strong>Database Management System Notes</strong> for details.  Here is an example for
starting the client with 10 connections opened to PostgreSQL:</p>
<pre class="literal-block">dbt2-client -a pgsql -d db.hostname -b dbt2 -c 10 -o .</pre>
<p>The client will log errors, as well as its processor ID (pid) into the current
directory, as specified by the <cite>-o .</cite> parameter.</p>
<p>The output from the client should look something like:</p>
<pre class="literal-block">setting locale: en_US.utf8
listening to port 30000
opening 10 connection(s) to localhost...
listening to port 30000
10 DB worker threads have started
client has started</pre>
<p>The next step is to start the driver.  To get sane results from a 1 warehouse
database, we should run the driver for at least 4 minutes (240 seconds):</p>
<pre class="literal-block">dbt2-driver -d client.hostname -w 1 -l 240 -outdir .</pre>
<p>The driver will log error and results, as well as its process ID (pid) into the
current directory.</p>
<p>The output from the driver should look something like:</p>
<pre class="literal-block">setting locale: en_US.utf8
connecting to client at 'db.hostname'

database table cardinalities:
warehouses = 1
districts = 10
customers = 3000
items = 100000
orders = 3000
stock = 100000
new-orders = 900

 transaction  mix threshold keying thinking
new order    0.45      0.45     18    12000
payment      0.43      0.88      3    12000
order status 0.04      0.92      2    10000
delivery     0.04      0.96      2     5000
stock level  0.04      1.00      2     5000

w_id range 0 to 0
10 terminals per warehouse
240 second steady state duration

driver is starting to ramp up at time 1675394297
driver will ramp up in  10 seconds
will stop test at time 1675394307
seed for 212536:7f9eca271700 : 10962933948494954280
seed for 212536:7f9eca234700 : 6320917737120767790
seed for 212536:7f9eca213700 : 6590945454066933208
seed for 212536:7f9eca1f2700 : 1675724396147333855
seed for 212536:7f9eca1d1700 : 15221135594039080856
seed for 212536:7f9eca1b0700 : 11698084064519635828
seed for 212536:7f9eca18f700 : 12013746617097863687
seed for 212536:7f9eca16e700 : 1937451735529826674
seed for 212536:7f9eca14d700 : 10201147048873733402
seed for 212536:7f9eca12c700 : 11758382826843355753
terminals started...
driver is exiting normally</pre>
<p>The last step is to process the test data to see what the results are:</p>
<pre class="literal-block">dbt2-post-process mix.log</pre>
<p>The resulting output should look something like:</p>
<pre class="literal-block">============  =====  =========  =========  ===========  ===========  =====
          ..     ..    Response Time (s)            ..           ..     ..
------------  -----  --------------------  -----------  -----------  -----
 Transaction      %   Average     90th %        Total    Rollbacks      %
============  =====  =========  =========  ===========  ===========  =====
    Delivery   3.81      0.000      0.000            4            0   0.00
   New Order  47.62      0.001      0.001           50            1   2.00
Order Status   5.71      0.001      0.001            6            0   0.00
     Payment  40.00      0.004      0.001           42            0   0.00
 Stock Level   2.86      0.000      0.000            3            0   0.00
============  =====  =========  =========  ===========  ===========  =====

* Throughput: 12.99 new-order transactions per minute (NOTPM)
* Duration: 3.9 minute(s)
* Unknown Errors: 0
* Ramp Up Time: 0.1 minute(s)</pre>
<p>Congratulations, you've run a test!</p>
</section>
<section id="comprehensive-test-execution">
<h4><a class="toc-backref" href="#toc-entry-40" role="doc-backlink">Comprehensive Test Execution</a></h4>
<p>The <cite>dbt2-run</cite> is a wrapper script that will attempt to collect system
statistics and database statistics, as well as start all components of the
test.  It can optionally profile a Linux system with readprofile, oprofile, or
perf.  See <strong>Database Management System Notes</strong> for any database management
system specific notes as there may be additional system specific flags.</p>
<p>The shell script <cite>dbt2-run</cite> is used to execute a test.  For example, run a 4
minutes (480 second) test against a default sized 1 warehouse database locally
and save the results to <cite>/tmp/results</cite>:</p>
<pre class="literal-block">dbt2 run -d 480 pgsql /tmp/results</pre>
<p>See the help output from <cite>dbt2 run --help</cite> a brief description of all options.</p>
<p>This script will also process the results and output the same information as if
you were running <cite>dbt2 report</cite> manually like the last section's example.
Additional, the <cite>dbt2 report --html</cite> command is for building an HTML report
based on all of the data that is saved to <cite>/tmp/results</cite> by running:</p>
<pre class="literal-block">dbt2 report --html /tmp/results</pre>
<p>The HTML report uses Docutils.  gnuplot is also required to generate any
charts.  This will create an <cite>index.html</cite> file in the <cite>&lt;directory&gt;</cite>.</p>
<p>An example of the HTML report is available online:
<a class="reference external" href="https://osdldbt.github.io/dbt-reports/dbt2/3-tier/report.html">https://osdldbt.github.io/dbt-reports/dbt2/3-tier/report.html</a></p>
<section id="executing-with-multiple-tiers">
<h5><a class="toc-backref" href="#toc-entry-41" role="doc-backlink">Executing with multiple tiers</a></h5>
<p>To execute the test where the database is on another tier, pass the <cite>--db-host
&lt;address&gt;</cite> flag to the <cite>dbt2 run</cite> command.  The address can be a hostname or IP
address.</p>
<p>To execute the test where the client is on another tier, pass the
<cite>--client-host &lt;address&gt;</cite> flag to the <cite>dbt2 run</cite> command.  The address can also
be a hostname or IP address.</p>
</section>
</section>
<section id="multi-process-driver-execution">
<h4><a class="toc-backref" href="#toc-entry-42" role="doc-backlink">Multi-process driver execution</a></h4>
<p>Default behavior for the driver is to create 10 threads per warehouse under a
single process.  At some point (depends on hardware and resource limitations)
the driver, specifically <cite>dbt2-driver</cite> as a multi-threaded progress, will
become a bottleneck.  We can increase the load by starting multiple
multi-threaded drivers.  The <cite>-b #</cite> flag can be passed to the <cite>dbt2 run</cite>
command to specify how many warehouses to be created per process.  The script
will calculate how many driver processes to start.</p>
</section>
<section id="keying-and-thinking-time">
<h4><a class="toc-backref" href="#toc-entry-43" role="doc-backlink">Keying and Thinking Time</a></h4>
<p>The driver is supposed to emulate the thinking time of a person as well as the
time a person takes to enter information into the terminal.  This introduces a
limit on the rate of transaction that can be executed by the database.</p>
<p>Each of the DBT-2 drivers allows the tester to specify different delays for
each transaction's keying and thinking time.  The most common scenario is not
factor in any time for keying or thinking.  For example:</p>
<pre class="literal-block">-ktd 0 -ktn 0 -kto 0 -ktp 0 -kts 0 -ttd 0 -ttn 0 -tto 0 -ttp 0 -tts 0</pre>
<p>See the help from the driver binaries to see which flag controls which
transaction's thinking and keying times if you want to varying the delays
differently.</p>
<p>The <cite>dbt2 run</cite> script sets each of the thinking and keying time flags to 0 by
default and does not offer any finer grained controls at this time.</p>
</section>
<section id="transaction-mix">
<h4><a class="toc-backref" href="#toc-entry-44" role="doc-backlink">Transaction Mix</a></h4>
<p>The transaction mix can be altered with the driver using the following flags,
where the percentages are represented as a decimal number:</p>
<table>
<tbody>
<tr><td><p>-q</p></td>
<td><p>percentage of Payment transaction, default 0.43</p></td>
</tr>
<tr><td><p>-r</p></td>
<td><p>percentage of Order Status transaction, default 0.04</p></td>
</tr>
<tr><td><p>-e</p></td>
<td><p>percentage of Delivery transaction, default 0.04</p></td>
</tr>
<tr><td><p>-t</p></td>
<td><p>percentage of Stock Level transaction, default 0.04</p></td>
</tr>
</tbody>
</table>
<p>The percentage for the New Order transaction is the difference after the other
4 transactions such that the sum adds to 1 (i.e. 100%.)</p>
</section>
<section id="complex-test-configurations">
<h4><a class="toc-backref" href="#toc-entry-45" role="doc-backlink">Complex Test Configurations</a></h4>
<p>The <cite>run</cite> script can use a TOML formatted configuration file to execute the
workload in more complex configuration than what the command line arguments can
provide.  Note that running the binaries by hand still offer the most
flexibility.  For example:</p>
<ul class="simple">
<li><p>Using multiple client programs across multiple systems</p></li>
<li><p>Using multiple driver programs across multiple systems</p></li>
<li><p>Specifying the client system and port per driver</p></li>
<li><p>Specifying the database system to use per client (for distributed database
systems)</p></li>
<li><p>Specifying the warehouse range per driver</p></li>
</ul>
<p>See the following subsections for specific scenarios.</p>
<section id="example-1-1-tier-threaded-driver-client">
<h5><a class="toc-backref" href="#toc-entry-46" role="doc-backlink">Example 1: 1-tier Threaded Driver &amp; Client</a></h5>
<p>This the traditional way to run the workload with three components, the
database, a client, and a driver.  In this example all three components are run
on a single system:</p>
<pre class="literal-block">mode = 1
database_name = &quot;dbt2&quot;
warehouses = 1
duration = 120

[[client]]
client_addr = &quot;localhost&quot;
database_addr = &quot;localhost&quot;
connections = 1

[[driver]]
driver_addr = &quot;localhost&quot;
client_addr = &quot;localhost&quot;</pre>
</section>
<section id="example-2-1-tier-multiple-threaded-drivers-clients">
<h5><a class="toc-backref" href="#toc-entry-47" role="doc-backlink">Example 2: 1-tier Multiple Threaded Drivers &amp; Clients</a></h5>
<p>This example is similar to Example 1, except it illustrates how to start
mutiple drivers and clients on the same system:</p>
<pre class="literal-block">mode = 1
database_name = &quot;dbt2&quot;
warehouses = 2
duration = 120

[[client]]
client_addr = &quot;localhost&quot;
database_addr = &quot;localhost&quot;
connections = 1

[[client]]
client_addr = &quot;localhost&quot;
database_addr = &quot;localhost&quot;
connections = 1
client_port = 30001

[[driver]]
driver_addr = &quot;localhost&quot;
client_addr = &quot;localhost&quot;
wmin = 1
wmax = 1

[[driver]]
driver_addr = &quot;localhost&quot;
client_addr = &quot;localhost&quot;
wmin = 2
wmax = 2
client_port = 30001</pre>
</section>
<section id="example-3-3-tier-threaded-driver-client">
<h5><a class="toc-backref" href="#toc-entry-48" role="doc-backlink">Example 3: 3-tier Threaded Driver &amp; Client</a></h5>
<p>This example is similar to Example 1, except it illustrates how to start
each component on separate systems, where the <cite>run</cite> script is executed on the
driver system:</p>
<pre class="literal-block">mode = 1
database_name = &quot;dbt2&quot;
warehouses = 1
duration = 120

[[client]]
client_addr = &quot;sodium&quot;
database_addr = &quot;lithium&quot;
connections = 1

[[driver]]
driver_addr = &quot;localhost&quot;
client_addr = &quot;sodium&quot;</pre>
</section>
<section id="example-4-3-tier-threaded-driver-client">
<h5><a class="toc-backref" href="#toc-entry-49" role="doc-backlink">Example 4: 3-tier Threaded Driver &amp; Client</a></h5>
<p>This example is similar to Example 3, except it illustrates how to start
multiple drivers and clients:</p>
<pre class="literal-block">mode = 1
database_name = &quot;dbt2&quot;
warehouses = 2
duration = 120

[[client]]
client_addr = &quot;sodium&quot;
database_addr = &quot;lithium&quot;
connections = 1

[[client]]
client_addr = &quot;sodium&quot;
database_addr = &quot;lithium&quot;
connections = 1
client_port = 30001

[[driver]]
driver_addr = &quot;localhost&quot;
client_addr = &quot;sodium&quot;
wmin = 1
wmax = 1

[[driver]]
driver_addr = &quot;localhost&quot;
client_addr = &quot;sodium&quot;
wmin = 2
wmax = 2
client_port = 30001</pre>
</section>
<section id="example-5-1-tier-event-driven-driver">
<h5><a class="toc-backref" href="#toc-entry-50" role="doc-backlink">Example 5: 1-tier Event-Driven Driver</a></h5>
<p>This is a simplified and low resource way to run the workload, where the client
has been combined with the driver.  This example is single system where the
event-driven driver and database are on the same system:</p>
<pre class="literal-block">mode = 3
database_name = &quot;dbt2&quot;
warehouses = 1
duration = 120

[[driver]]
driver_addr = &quot;localhost&quot;
database_addr = &quot;localhost&quot;</pre>
</section>
<section id="example-6-1-tier-multiple-event-driven-drivers">
<h5><a class="toc-backref" href="#toc-entry-51" role="doc-backlink">Example 6: 1-tier multiple event-driven drivers</a></h5>
<p>A single system where multiple event-driven drivers and database are on the
same system.  This example illustrates how to start multiple drivers that use a
different and distinct warehouse range:</p>
<pre class="literal-block">mode = 3
database_name = &quot;dbt2&quot;
warehouses = 2
duration = 120

[[driver]]
driver_addr = &quot;localhost&quot;
database_addr = &quot;localhost&quot;
wmin = 1
wmax = 1

[[driver]]
driver_addr = &quot;localhost&quot;
database_addr = &quot;localhost&quot;
wmin = 2
wmax = 2</pre>
</section>
<section id="example-7-2-tier-event-driven-driver">
<h5><a class="toc-backref" href="#toc-entry-52" role="doc-backlink">Example 7: 2-tier Event-Driven Driver</a></h5>
<p>This is similar to Example 5 except the driver is on a separate system.  The
<cite>run</cite> script is executed on the driver system:</p>
<pre class="literal-block">mode = 3
database_name = &quot;dbt2&quot;
warehouses = 1
duration = 120
[[driver]]
driver_addr = &quot;localhost&quot;
database_addr = &quot;lithium&quot;</pre>
</section>
<section id="example-8-2-tier-multiple-event-driven-drivers">
<h5><a class="toc-backref" href="#toc-entry-53" role="doc-backlink">Example 8: 2-tier Multiple Event-Driven Drivers</a></h5>
<p>This example expands on Example 7 where there are multiple event-driven drivers
started on the same system that are configured on distinct warehouse ranges:</p>
<pre class="literal-block">mode = 3
database_name = &quot;dbt2&quot;
warehouses = 2
duration = 120

[[driver]]
driver_addr = &quot;localhost&quot;
database_addr = &quot;lithium&quot;
wmin = 1
wmax = 1

[[driver]]
driver_addr = &quot;localhost&quot;
database_addr = &quot;lithium&quot;
wmin = 2
wmax = 2</pre>
</section>
</section>
</section>
</section>
<section id="database-management-system-notes">
<h2><a class="toc-backref" href="#toc-entry-54" role="doc-backlink">Database Management System Notes</a></h2>
<section id="cockroachdb">
<h3><a class="toc-backref" href="#toc-entry-55" role="doc-backlink">CockroachDB</a></h3>
<p>A really quick howto.</p>
<p>The CockroachDB scripts makes use of PostgreSQL's psql client program and libpq
C client library interface, thus any environment variables that libpq would
use.  See dbt2_profile for examples of what environment variables that may be
used.</p>
<p>The <em>run</em> script currently only support handling CockroachDB installations that
are already setup.  i.e. script do not handle installing or initialization a
database instance.</p>
<p>Create a 1 warehouse database by running dbt2-cockroach-build-db:</p>
<pre class="literal-block">dbt2-cockroach-build-db -w 1 -l 26257</pre>
<p>Flag description:</p>
<pre class="literal-block">-d &lt;dir&gt; -  Location for data files to load.
-w #     -  Set the warehouse scale factor.</pre>
<p>Additional flags:</p>
<pre class="literal-block">-h            -  Help.
-r            -  Drop the database before loading, for rebuilding the
             database.</pre>
<p>Run a test a 2 minute, 1 warehouse test:</p>
<pre class="literal-block">dbt2-run -a cockroach -c 10 -d 120 -w 1 -o /tmp/results</pre>
</section>
<section id="mysql">
<h3><a class="toc-backref" href="#toc-entry-56" role="doc-backlink">MySQL</a></h3>
<section id="comments">
<h4><a class="toc-backref" href="#toc-entry-57" role="doc-backlink">COMMENTS</a></h4>
<p>There are two versions of DBT2(TPC-C) test:</p>
<ul class="simple">
<li><p>pure C based version of the test(nonSP)</p></li>
<li><p>server side SP based version of the test(default)</p></li>
</ul>
<p>It is possible to run C based(nonSP) test with any version of MySQL
server.</p>
<p>To run test you have to build test with includes and libraries
from MySQL 5.0 or higher.</p>
<p>See examples/mysql/mysql-dbt2.cnf for example MySQL defaults file.</p>
</section>
<section id="multi-tier-testing">
<h4><a class="toc-backref" href="#toc-entry-58" role="doc-backlink">MULTI-TIER TESTING</a></h4>
<ul>
<li><p>Enable 'PermitUserEnvironment' in sshd_config.</p></li>
<li><p>Set DBT2DATADIR in the database system user's '.ssh/environment' file:</p>
<p>DBT2DATADIR=/tmp/mydbt2</p>
</li>
<li><p>Enalbe tcp/ip listening in the defaults file (see example from above).  This
binds to all network interfaces:</p>
<pre class="literal-block">bind-address = 0.0.0.0</pre>
</li>
<li><p>The build scripts automatically grants remote access to DB_USER
(default root) for everything from any ip address.  If there are other users
that require access, the grant will have to be done manually:</p>
<p>grant all on <em>.</em> to ${DB_USER}&#64;'%';</p>
</li>
</ul>
</section>
<section id="preparation-for-test">
<h4><a class="toc-backref" href="#toc-entry-59" role="doc-backlink">PREPARATION FOR TEST</a></h4>
<ol class="arabic simple" start="0">
<li><p>Build test binaries</p></li>
</ol>
<p>NOTE:</p>
<blockquote>
<p>If you want to compile with MySQL support, you must either make sure
that path to 'mysql_config' is listed in your PATH environment variable.</p>
</blockquote>
<pre class="literal-block">cmake CMakeLists.txt -DDBMS=mysql
make
make install</pre>
<ol class="arabic">
<li><p>How to generate data files for test?</p>
<p>One has to specify:</p>
<pre class="literal-block">-w - number of warehouses (example: -w 3)
-d - output path for data files (example: -d /tmp/dbt2-w3)
- mode (example: --mysql)</pre>
<p>datagen -w 3 -d /tmp/dbt2-w3 --mysql</p>
<p>Please note that output directory for data file should exist.</p>
</li>
<li><p>How to load test database?</p>
<p>You should run shell script which will create database scheme
and will load all data files.</p>
</li>
</ol>
<pre class="literal-block"> dbt2-mysql-build-db -d dbt2 -f /tmp/dbt2-w3 -v -w 2 -s /tmp/mydbt2.sock

usage: dbt2-mysql-build-db [options]
options::

    -d &lt;database name&gt;
    -f &lt;path to dataset files&gt;
    -m &lt;database scheme [OPTIMIZED|ORIG] (default scheme OPTIMIZED)&gt;
    -c &lt;mysql.cnf defaults file&gt;
    -s &lt;database socket&gt;
    -h &lt;database host&gt;
    -u &lt;database user&gt;
    -p &lt;database password&gt;
    -e &lt;storage engine: [MYISAM|INNODB|BDB]. (default INNODB)&gt;
    -l &lt;to use LOCAL keyword while loading dataset&gt;
    -v &lt;verbose output&gt;

Example: dbt2-mysql-build-db -d dbt2 -f /tmp/dbt2-w3 -s /tmp/mysql.sock -p ~/src/dbt2/examples/mysql/mysql-dbt2.cnf</pre>
<ol class="arabic" start="3">
<li><p>How to load SP procedures?</p>
<p>dbt2-mysql-load-stored-procs</p>
<p>usage: dbt2-mysql-load-sp [options]
options:</p>
<pre class="literal-block">-d &lt;database name&gt;
-f &lt;path to SPs&gt;
-h &lt;database host (default: localhost)&gt;
-s &lt;database socket&gt;
-u &lt;database user&gt;
-p &lt;database password&gt;
-t &lt;database port&gt;</pre>
<p>Example: dbt2-mysql-load-stored-procs -d dbt2 -f ~/src/dbt2/storedproc/mysql/ -s /tmp/mysql.sock</p>
</li>
</ol>
</section>
<section id="run-test">
<h4><a class="toc-backref" href="#toc-entry-60" role="doc-backlink">RUN TEST</a></h4>
<blockquote>
<p>dbt2-run</p>
<p>usage: dbt2-run -a mysql -c &lt;number of database connections&gt; -t &lt;duration of test&gt; -w &lt;number of warehouses&gt;
other options:</p>
<pre class="literal-block">-D &lt;database name. (default dbt2)&gt;
-h &lt;database host name. (default localhost)&gt;
-l &lt;database port number. (default 3306)&gt;
-S &lt;database socket&gt;
-u &lt;database user&gt;
-x &lt;database password&gt;
-s &lt;delay of starting of new thread in milliseconds(default 300ms)&gt;
-t &lt;terminals per warehouse. [1..10] (default 10)&gt;
-z &lt;comments for the test&gt;
-n &lt;use zero delays for test (default no)&gt;
-v &lt;verbose output&gt;
-o &lt;output dir&gt;
-p &lt;mysql defaults file</pre>
<p>Example: dbt2-run -a mysql -D dbt2 -c 20 -t 300 -w 3 -o results -S /tmp/mysql.sock -p ~/src/dbt2/examples/mysql/mysql-dbt2.cnf</p>
<p>Test will be run for 300 seconds with 20 database connections and
scale factor(num of warehouses) 3:</p>
<pre class="literal-block">-c number of database connections
-d duration of test in seconds
-w number of warehouses (scale factor)</pre>
</blockquote>
<p>WARNING: If you break test (by Control-C for instance) or some kind of error
happened during running of test and you want to start test again please be sure
that 'client' and 'driver' programms are not running anymore otherwise test
will fail.</p>
<p>WARNING: Please ensure that number of warehouses (option -w) is less of equal
(not greater) to the real number of warehouses that exist in your test
database.</p>
</section>
<section id="postrunning-analyses">
<h4><a class="toc-backref" href="#toc-entry-61" role="doc-backlink">POSTRUNNING ANALYSES</a></h4>
<p>Results can be found in bin/output/&lt;number&gt;</p>
<p>some of the usefull log files:</p>
<pre class="literal-block">  results/client/${HOSTNAME}.*/error.log - errors from backend C|SP based
  results/driver/${HOSTNAME}.*/error.log - errors from terminals(driver)
  results/mix.log - info about performed transactions
r  esults/report.txt - results of the test</pre>
</section>
</section>
<section id="postgresql-2">
<h3><a class="toc-backref" href="#toc-entry-62" role="doc-backlink">PostgreSQL</a></h3>
<section id="setup-1">
<h4><a class="toc-backref" href="#toc-entry-63" role="doc-backlink">Setup</a></h4>
<p>The DBT-2 test kit has been ported to work with PostgreSQL starting with
version 7.3.  It has be updated to work with later version and backwards
compatibility may vary.  Source code for PostgreSQL can be obtained from their
website at: <a class="reference external" href="https://www.postgresql.org/">https://www.postgresql.org/</a></p>
<p>To install PostgreSQL from source:</p>
<pre class="literal-block">./configure --prefix=&lt;installation dir&gt;
make
make install</pre>
<p>Prior to PostgreSQL 8.0 this additional make command is required to ensure the
server include files get installed:</p>
<pre class="literal-block">make install-all-headers</pre>
<p>After installing PostgreSQL, the DBT-2 C stored functions need to be compiled
and installed, if they are to be used instead of pl/pgsql stored functions or
other client side transaction logic:</p>
<pre class="literal-block">cd storedproc/pgsql/c
make
make install</pre>
<p>The <cite>make install</cite> command will need to be run by the owner of the database
installation.</p>
<p>When testing PostgreSQL in a multi-tier system configuration, verify that the
database has been configuration to accept TCP/IP connections.  For example, the
<cite>listen_addresses</cite> parameter must be set to listen for connections on the
appropriate interfaces.  Remote connections must also be allowed in the
<cite>pg_hba.conf</cite> file.  The simplest (and insecure) way would be to trust all
connections on all interfaces.</p>
<p>Also prior to PostgreSQL 8.0, <cite>pg_autovacuum</cite> should be installed.  If
installing from source, it is located in the <cite>contrib/pg_autovacuum</cite> directory.</p>
<p>The following subsections have additional PostgreSQL version specific notes.</p>
<section id="v7-3">
<h5><a class="toc-backref" href="#toc-entry-64" role="doc-backlink">v7.3</a></h5>
<p>With PostgreSQL 7.3, it needs to be built with a change in <cite>pg_config.h.in</cite>
where <cite>INDEX_MAX_KEYS</cite> must be set to 64.  Be sure to make this change before
running the configure script for PostgreSQL.</p>
</section>
<section id="v7-4">
<h5><a class="toc-backref" href="#toc-entry-65" role="doc-backlink">v7.4</a></h5>
<p>With PostgreSQL 7.4, it needs to be built with a change in
<cite>src/include/pg_config_manual.h</cite> where <cite>INDEX_MAX_KEYS</cite> must be set to 64.</p>
<p>Edit the parameter in <cite>postgresql.conf</cite> that says <cite>tcpip_socket = false</cite>,
uncomment, set to <cite>true</cite>, and restart the daemon.</p>
</section>
<section id="v8-0">
<h5><a class="toc-backref" href="#toc-entry-66" role="doc-backlink">v8.0</a></h5>
<p>For PostgreSQL 8.0 and later, run <cite>configure</cite> with the <cite>--enable-thread-safety</cite>
to avoid <cite>SIGPIPE</cite> handling for the multi-thread DBT-2 client program.  This is
a significant performance benefit.</p>
</section>
</section>
<section id="a-really-quick-howto">
<h4><a class="toc-backref" href="#toc-entry-67" role="doc-backlink">A really quick howto</a></h4>
<p>Edit <cite>examples/dbt2_profile</cite> and follow the notes for the <cite>DBT2PGDATA</cite>
directory.  <cite>DBT2PGDATA</cite> is where the database directory will be created.</p>
<p>Create a 1 warehouse database by running:</p>
<pre class="literal-block">dbt2 build pgsql</pre>
<p>Run a 5 minute (300 second) test by running:</p>
<pre class="literal-block">dbt2 run -d 300 pgsql /tmp/result</pre>
</section>
<section id="building-the-database-1">
<h4><a class="toc-backref" href="#toc-entry-68" role="doc-backlink">Building the Database</a></h4>
<p>The <cite>dbt2-pgsql-build-db</cite> script is designed to handle the following steps:</p>
<ol class="arabic simple">
<li><p>create the database</p></li>
<li><p>create the tables</p></li>
<li><p>generate and load the tables</p></li>
<li><p>create the indexes</p></li>
<li><p>vacuum the database</p></li>
</ol>
<p>The <cite>dbt2-pgsql-build-db</cite> script is also designed to generate data in parallel
based on the number of processors detected on the system, and will stream the
data into the database.  The script currently do not let you control the degree
of parallelism, or whether the data should be created as files first, but these
can be controlled manually by running the <cite>dbt2-datagen</cite> binary directly.</p>
<p>The other significant choices available are:</p>
<ul class="simple">
<li><p><cite>-r</cite> drop the existing database first</p></li>
<li><p><cite>-s &lt;c | plpgsql&gt;</cite> use C or pl/pgsql stored functions, where plpgsql is the
default</p></li>
<li><p><cite>-t</cite> use tablespaces for tables and indexes</p></li>
<li><p><cite>-u</cite> the executing user has privileges to restart the database system, and
drop and create a database</p></li>
</ul>
<p>See the usage output with the <cite>-h</cite> for the complete list of options.</p>
<p>The following command will create a default sized 1 warehouse database:</p>
<pre class="literal-block">dbt2 build pgsql</pre>
</section>
<section id="environment-configuration-1">
<h4><a class="toc-backref" href="#toc-entry-69" role="doc-backlink">Environment Configuration</a></h4>
<p>The DBT-2 scripts required environment variables to be set in order to work
properly (e.g. <cite>examples/dbt2_profile</cite>) in order for the scripts to work
properly.  For example:</p>
<pre class="literal-block">DBT2PORT=5432; export DBT2PORT
DBT2DBNAME=dbt2; export DBT2DBNAME
DBT2PGDATA=/tmp/pgdata; export DBT2PGDATA</pre>
<p>An optional environment variable can be set to specify a different location for
the transaction logs (i.e. <cite>pg_xlog</cite> or <cite>pg_wal</cite>) when the <cite>dbt2-pgsql-init-db</cite>
script:</p>
<pre class="literal-block">DBT2XLOGDIR=/tmp/pgxlogdbt2; export DBT2XLOGDIR</pre>
<p>The environment variables may need to be defined in <cite>~/.ssh/environment</cite> file
on each system for multi-tier environment for <cite>ssh</cite>.  The ssh daemon may need
to be configured to enable the use of user environment files.  Make sure <cite>PATH</cite>
is set to include the location where the DBT-2 executables and PostgreSQL
binaries are installed, if not in the default <cite>PATH</cite>.  For example:</p>
<pre class="literal-block">DBT2PORT=5432
DBT2DBNAME=dbt2
DBT2PGDATA=/tmp/pgdata
PATH=/usr/local/bin:/usr/bin:/bin:/opt/bin</pre>
</section>
<section id="tablespace-notes">
<h4><a class="toc-backref" href="#toc-entry-70" role="doc-backlink">Tablespace Notes</a></h4>
<p>The scripts assumes a specific tablespace layout for keeping the scripts
simple.</p>
<p>The <cite>${DBT2TSDIR}</cite> environment variable defines the directory where all
tablespace devices will be mounted.  Directories or symlinks can be substituted
for what is assumed to be a mount point from this point forward.</p>
<p><cite>dbt2-pgsql-create-tables</cite> and <cite>dbt2-pgsql-create-indexes</cite> are where the
tablespaces are created.</p>
<p>The expected mount points or symlinks, which must also be writeable by the
database owner, need to be at:</p>
<pre class="literal-block">${DBT2TSDIR}/warehouse
${DBT2TSDIR}/district
${DBT2TSDIR}/customer
${DBT2TSDIR}/history
${DBT2TSDIR}/new_order
${DBT2TSDIR}/orders
${DBT2TSDIR}/order_line
${DBT2TSDIR}/item
${DBT2TSDIR}/stock
${DBT2TSDIR}/index1
${DBT2TSDIR}/index2
${DBT2TSDIR}/pk_customer
${DBT2TSDIR}/pk_district
${DBT2TSDIR}/pk_item
${DBT2TSDIR}/pk_new_order
${DBT2TSDIR}/pk_order_line
${DBT2TSDIR}/pk_orders
${DBT2TSDIR}/pk_stock
${DBT2TSDIR}/pk_warehouse</pre>
</section>
<section id="appimage-notes">
<h4><a class="toc-backref" href="#toc-entry-71" role="doc-backlink">AppImage Notes</a></h4>
<section id="limitations">
<h5><a class="toc-backref" href="#toc-entry-72" role="doc-backlink">Limitations</a></h5>
<p>Using the AppImage has some limitations with PostgreSQL:</p>
<ol class="arabic simple">
<li><p>The AppImage cannot alone be used to build a database with C stored
functions for the database transactions.  The full kit still needs to be
downloaded on the PostgreSQL server so that the C stored functions can be
built and installed onto the system.  Thus the default behavior is to use
the pl/pgsql stored functions.</p></li>
</ol>
</section>
</section>
</section>
<section id="sap-db">
<h3><a class="toc-backref" href="#toc-entry-73" role="doc-backlink">SAP DB</a></h3>
<section id="setup-2">
<h4><a class="toc-backref" href="#toc-entry-74" role="doc-backlink">Setup</a></h4>
<p>After installing SAP DB create the user id <em>sapdb</em>, assigning the user to group
<em>sapdb</em>.</p>
<p>Create the database stats collection tool, x_cons, by executing the following:</p>
<pre class="literal-block">cp -p /opt/sapdb/indep_prog/bin/x_server /opt/sapdb/indep_prog/bin/x_cons</pre>
<p>The test kit requires unixODBC drivers to connect with SAP DB.  The driver can
be install from the source available at:
<a class="reference external" href="http://www.unixodbc.org/unixODBC-2.2.3.tar.gz">http://www.unixodbc.org/unixODBC-2.2.3.tar.gz</a></p>
</section>
<section id="odbc">
<h4><a class="toc-backref" href="#toc-entry-75" role="doc-backlink">ODBC</a></h4>
<p>An <cite>.odbc.ini</cite> file must reside in the home directory of the user
attempting to run the program.  The format of the file is:</p>
<pre class="literal-block">[alias]
ServerDB = database_name
ServerNode = address
Driver = /opt/sapdb/interfaces/odbc/lib/libsqlod.so
Description = any text</pre>
<p>For example:</p>
<pre class="literal-block">[dbt2]
ServerDB = DBT2
ServerNode = 192.168.0.1
Driver = /opt/sapdb/interfaces/odbc/lib/libsqlod.so
Description = OSDL DBT-2</pre>
<p>is a valid <cite>.odbc.ini</cite> file where dbt2 can be used as the server name to
connect to the database.  Note that the location of _libsqlod.so_ may vary
depending on how your database is installed on your system.</p>
</section>
<section id="building-the-database-2">
<h4><a class="toc-backref" href="#toc-entry-76" role="doc-backlink">Building the Database</a></h4>
<p>The script dbt2/scripts/sapdb/create_db_sample.sh must be edited to configure
the SAP DB devspaces.  The param_adddevspaces commands need to be changed to
match your system configuration.  Similarly, the backup_media_put commands also
need to be changed to match your system configuration.  The script assumes the
instance name to be <cite>DBT2</cite>.  Change the line <cite>SID=DBT2</cite> if you need to change
the instance name (in this an all the scripts).  Many other SAP DB parameters
(e.g. MAXCPU) will need to be adjusted based on your system.</p>
<p>As user sapdb, execute the following script, in dbt2/scripts/sapdb, to generate
the database from scratch (which will execute create_db_sample.sh):</p>
<pre class="literal-block">./db_setup.sh &lt;warehouses&gt; &lt;outputdir&gt;</pre>
<p>where &lt;warehouses&gt; is the number of warehouses to build for and &lt;outputdir&gt; is
the directory in which the data files will be generated.  This script will
create the data files, create the database, the tables, load the database,
create indexes, update database statistics, load the stored procedures, and
backup the database.  This script assumes the instance name is <cite>DBT2</cite> so you
need to edit the line ''SID=DBT2'' if you need to change the instance name.</p>
<p>Although the create script starts the remote communication server, it is a good
idea to include the same thing in your system startup scripts /etc/rc.local:</p>
<pre class="literal-block"># start remote communication server:
x_server start &gt; /dev/null 2&gt;&amp;1:</pre>
<p>There is an option for ''migration'' that needs to be documented, or else
removed from the create_db.sh scripts.</p>
<p>It is highly recommended for performance that you use raw partitions for the
LOG and DATA files.  Here is a sample of the adddevices when using 1 LOG (the
limit is one)  of 1126400 -8k pages and 5 raw DATA devices of 2044800 -8k pages
each:</p>
<pre class="literal-block">param_adddevspace 1 LOG  /dev/raw/raw1 R 1126400
param_adddevspace 1 DATA /dev/raw/raw2 R 204800
param_adddevspace 2 DATA /dev/raw/raw3 R 204800
param_adddevspace 3 DATA /dev/raw/raw4 R 204800
param_adddevspace 4 DATA /dev/raw/raw5 R 204800
param_adddevspace 5 DATA /dev/raw/raw6 R 204800</pre>
</section>
<section id="results">
<h4><a class="toc-backref" href="#toc-entry-77" role="doc-backlink">Results</a></h4>
<p>Each output files starting with <cite>m_*.out</cite>, refers to a monitor table in the
SAP DB database.  For example:</p>
<table>
<tbody>
<tr><td><p>m_cache.out</p></td>
<td><p>MONITOR_CACHE contains information about the operations performed
on the different caches.</p></td>
</tr>
<tr><td><p>m_lock.out</p></td>
<td><p>MONITOR_LOCK contains information on the database's lock
management operations.</p></td>
</tr>
<tr><td><p>m_pages.out</p></td>
<td><p>MONITOR_PAGES contains information on page accesses.</p></td>
</tr>
<tr><td><p>m_trans.out</p></td>
<td><p>MONITOR_TRANS contains information on database transaction.</p></td>
</tr>
<tr><td><p>m_load.out</p></td>
<td><p>MONITOR_LOAD contains information on the executed SQL statements
and access methods.</p></td>
</tr>
<tr><td><p>m_log.out</p></td>
<td><p>MONITOR_LOG contains information on the database logging
operations.</p></td>
</tr>
<tr><td><p>m_row.out</p></td>
<td><p>MONITOR_ROW contains information on operations at the row level.</p></td>
</tr>
</tbody>
</table>
<p>Additional database locking statistics are collected in <cite>lockstats.csv</cite>.  The
data and log devspaces statistics are collected in <cite>datadev0.txt</cite>,
<cite>datadev1.txt</cite>, <cite>logdev0.txt</cite>, and <cite>logdev1.txt</cite>, respectively.</p>
</section>
</section>
<section id="sqlite">
<h3><a class="toc-backref" href="#toc-entry-78" role="doc-backlink">SQLite</a></h3>
<p>To create a database:</p>
<pre class="literal-block">dbt2-sqlite-build-db -g -w 1 -d /tmp/dbt2-w1 -f /tmp/dbt2data</pre>
<p>To run a test:</p>
<pre class="literal-block">dbt2-run -a sqlite -p /tmp/dbt2-w1 -c 1 -d 120 -w 1 -n -o /tmp/results</pre>
<p>The <cite>-p</cite> parameter must be passed to the <cite>dbt2-run</cite> script to specify
where the SQLite database files are.</p>
</section>
<section id="yugabytedb">
<h3><a class="toc-backref" href="#toc-entry-79" role="doc-backlink">YugabyteDB</a></h3>
<p>A really quick howto.</p>
<p>The YugabyteDB scripts makes use of PostgreSQL's psql client program and libpq
C client library interface, thus any environment variables that libpq would
use.  See dbt2_profile for examples of what environment variables that may be
used.</p>
<p>The <em>run</em> script currently only support handling YugabyteDB installations that
are already setup.  i.e. script do not handle installing or initialization a
database instance.</p>
<p>Create a 1 warehouse database by running dbt2-yugabyte-build-db:</p>
<pre class="literal-block">dbt2-yugabyte-build-db -w 1 -l 26257</pre>
<p>Flag description:</p>
<pre class="literal-block">-d &lt;dir&gt; -  Location for data files to load.
-w #     -  Set the warehouse scale factor.</pre>
<p>Additional flags:</p>
<pre class="literal-block">-h            -  Help.
-r            -  Drop the database before loading, for rebuilding the
             database.</pre>
<p>Run a test a 2 minute, 1 warehouse test, specifying a PostgreSQL database
management system:</p>
<pre class="literal-block">dbt2-run -a pgsql -c 10 -d 120 -w 1 -o /tmp/results</pre>
</section>
</section>
<section id="operating-system-notes">
<h2><a class="toc-backref" href="#toc-entry-80" role="doc-backlink">Operating System Notes</a></h2>
<section id="linux">
<h3><a class="toc-backref" href="#toc-entry-81" role="doc-backlink">Linux</a></h3>
<p>If you want readprofile data, you need to give the user <strong>sudo</strong> access to run
<strong>readprofile.  Root privileges are required to clear the counter data.
Additionally, the Linux kernel needs to be booted with `profile=2` in the
kernel command line.  Here is a **sudo</strong> configuration example of passwordless
access for user <em>postgres</em> to run <strong>readprofile -r</strong>:</p>
<pre class="literal-block">postgres ALL = NOPASSWD: /usr/sbin/readprofile -r</pre>
<p>The number of open files will likely need to be raised for the on the systems
that are driving the database when using the thread based driver and client
programs.</p>
<p>To increase this for a user edit <cite>/etc/security/limits.conf</cite>.  Here is an
example for the user <em>postgres</em>:</p>
<pre class="literal-block">postgres         soft    nofile          40000
postgres         hard    nofile          40000</pre>
<p>The Linux kernel parameter also needs to be adjusted because the user limits
cannot be set above the operating system limits.  Edit <cite>/etc/sysctl.conf</cite>:</p>
<pre class="literal-block">fs.file-max = 40000</pre>
<p>This can be verified in <cite>/proc/sys/fs/file-max</cite>.</p>
<p>Additionally the driver for this workload may need to create more threads
than allowed by default.  To increase the thread per process limit for the
user in <cite>/etc/security/limits.conf</cite>:</p>
<pre class="literal-block">postgres         soft    nproc           32768
postgres         hard    nproc           32768</pre>
<p>Similarly in <cite>/etc/sysctl.conf</cite> for the same reasons as above:</p>
<pre class="literal-block">kernel.threads-max = 32768</pre>
<p>This can be verified in <cite>/proc/sys/kernel/threads-max</cite>.</p>
<p>One of the shared memory parameters will likely needs to be raised on the
database system in order to accommodate increasing the shared_buffers parameter
in PostgreSQL.  One way to do this permanently is to edit <cite>/etc/sysctl.conf</cite>
and add:</p>
<pre class="literal-block">kernel.shmmax = 41943040</pre>
</section>
<section id="solaris">
<h3><a class="toc-backref" href="#toc-entry-82" role="doc-backlink">Solaris</a></h3>
<p>These notes are from testing with OpenSolaris 10.</p>
<p>Install the SFWgplot package for gnuplot from the Solaris 20 companion DVD.</p>
<p>Added the following to your path in order to use gcc (and other development
tools) and to use gnuplot:</p>
<pre class="literal-block">/usr/xpg6/bin:/usr/xpg4/bin:/usr/ccs/bin:/usr/sfw/bin:/opt/sfw/bin</pre>
</section>
</section>
<section id="developer-guide">
<h2><a class="toc-backref" href="#toc-entry-83" role="doc-backlink">Developer Guide</a></h2>
<p>This document is for detailing any related to the development of this test kit.</p>
<section id="building-the-kit">
<h3><a class="toc-backref" href="#toc-entry-84" role="doc-backlink">Building the Kit</a></h3>
<p>CMake is build system used for this kit.  A <cite>Makefile.cmake</cite> is provided to
automate some of the tasks.</p>
<p>Building for debugging:</p>
<pre class="literal-block">make -f Makefile.cmake debug</pre>
<p>Building for release:</p>
<pre class="literal-block">make -f Makefile.cmake release</pre>
<p>Building source packages:</p>
<pre class="literal-block">make -f Makefile.cmake package</pre>
<p>See the <strong>AppImage</strong> section for details on building an AppImage.  There are
additional requirements for the <cite>appimage</cite> target in the <cite>Makefile.cmake</cite>.
Alternatively, the kit provides scripts in the <em>tools</em> diretory to create a
container that can create an AppImage.</p>
</section>
<section id="testing-the-kit">
<h3><a class="toc-backref" href="#toc-entry-85" role="doc-backlink">Testing the Kit</a></h3>
<p>The CMake testing infrastructure is used with shUnit2 to provide some testing.</p>
<section id="datagen">
<h4><a class="toc-backref" href="#toc-entry-86" role="doc-backlink">datagen</a></h4>
<p>Tests are provided to verify that partitioning does not generate different data
than if the data was not partitioned.  There are some data that is generated
with the time stamp of when the data is created, so those columns are ignored
when comparing data since they are not likely to be the same time stamps.</p>
</section>
<section id="post-process">
<h4><a class="toc-backref" href="#toc-entry-87" role="doc-backlink">post-process</a></h4>
<p>A test is provided to make sure that the post-process output continues to work
with multiple mix files as well as with various statistical analysis packages.</p>
</section>
</section>
<section id="appimage">
<h3><a class="toc-backref" href="#toc-entry-88" role="doc-backlink">AppImage</a></h3>
<p>AppImages are only for Linux based systems:</p>
<blockquote>
<p><a class="reference external" href="https://appimage.org/">https://appimage.org/</a></p>
</blockquote>
<p>The AppImageKit AppImage can be downloaded from:</p>
<blockquote>
<p><a class="reference external" href="https://github.com/AppImage/AppImageKit/releases">https://github.com/AppImage/AppImageKit/releases</a></p>
</blockquote>
<p>It is recommended to build AppImages on older distributions:</p>
<blockquote>
<p><a class="reference external" href="https://docs.appimage.org/introduction/concepts.html#build-on-old-systems-run-on-newer-systems">https://docs.appimage.org/introduction/concepts.html#build-on-old-systems-run-on-newer-systems</a></p>
</blockquote>
<p>At the time of this document, CentOS 7 is the one of the oldest supported Linux
distributions with the oldest libc version.</p>
<p>The logo used is the number &quot;2&quot; from the Freeware Metal On Metal Font.</p>
<p>See the <cite>README.rst</cite> in the <cite>tools/</cite> directory for an example of creating
an AppImage with a Podman container.</p>
<section id="building-the-appimage">
<h4><a class="toc-backref" href="#toc-entry-89" role="doc-backlink">Building the AppImage</a></h4>
<p>The AppImages builds a custom minimally configured PostgreSQL build to reduce
library dependency requirements.  Part of this reason is to make it easier to
include libraries with compatible licences.  At least version PostgreSQL 11
should be used for the <cite>pg_type_d.h</cite> header file.</p>
<p>At the time of this document, PostgreSQL 11 was configured with the following
options:</p>
<pre class="literal-block">./configure --without-ldap --without-readline --without-zlib \
      --without-gssapi --with-openssl</pre>
<p>Don't forget that both <cite>PATH</cite> and <cite>LD_LIBRARY_PATH</cite> may need to be set
appropriately depending on where the custom build of PostgreSQL is installed.</p>
</section>
</section>
</section>
</main>
</body>
</html>
